{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'style.css' %}">
    <title>Weather</title>
</head>
<body>
    {{ user.username }}
    <a href="/logout/">logout</a>
        <form method="post">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit">Save</button>
        </form>

        <hr>
    
    <div class="column is-offset-4 is-4">


        {% for weather in weather_data %}
        <div class="box">
            <article class="media">
                <div class="media-content">
                    <div class="content">
                        <p>
                            {% for city in cities %}
                            {% if weather.city|lower == city.name|lower %}
                            <a href="{% url 'update' pk=city.pk %}">{{ city.name }}</a>
                            {% endif %}
                            {% endfor %}
                            <br>
                            <span class="subtitle">Temperatur: {{ weather.temperature }}° C,</span>
                            <span class="subtitle"> Humidity: {{ weather.humidity }}° C</span>
                            <br>{{ weather.description }}
                        </p>
                    </div>
                </div>
            </article>
        </div>
        {% endfor %}

    </div>

    <!-- <script>
        // Initialize an empty object to store weather data
let weatherData = {};

// Function to fetch weather data from the API
async function fetchWeatherData(city) {
    const apiKey = 'your_api_key';
    const apiUrl = `https://api.weatherapi.com/v1/current.json?key=${apiKey}&q=${city}`;
    
    try {
        const response = await fetch(apiUrl);
        const data = await response.json();
        return data;
    } catch (error) {
        console.error('Error fetching weather data:', error);
        return null;
    }
}

// Function to handle city click event
async function handleCityClick(city) {
    if (weatherData[city]) {
        // If weather data for this city is already fetched, display it
        displayWeatherDetails(weatherData[city]);
    } else {
        // If weather data is not available, fetch it
        const data = await fetchWeatherData(city);
        if (data) {
            // Store the data and display it
            weatherData[city] = data;
            displayWeatherDetails(data);
        }
    }
}

// Function to display weather details
function displayWeatherDetails(data) {
    // Display weather details on your page
    console.log('Weather details:', data);
}

    </script> -->
</body>
</html>